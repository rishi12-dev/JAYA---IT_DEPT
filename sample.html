<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Student Desk Pro - Engineering Hub</title>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/animate.css/4.1.1/animate.min.css">
    <style>
        /* Global Styles */
        :root {
            --primary-color: #4361ee;
            --secondary-color: #3f37c9;
            --accent-color: #4895ef;
            --text-color: #2b2d42;
            --bg-color: #f8f9fa;
            --card-color: #ffffff;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.1);
            --transition: all 0.3s ease;
        }

        .dark-mode {
            --primary-color: #4895ef;
            --secondary-color: #4361ee;
            --accent-color: #3f37c9;
            --text-color: #f8f9fa;
            --bg-color: #121212;
            --card-color: #1e1e1e;
            --shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
        }

        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }

        body {
            background-color: var(--bg-color);
            color: var(--text-color);
            line-height: 1.6;
            transition: var(--transition);
            overflow-x: hidden;
        }

        .container {
            max-width: 1200px;
            margin: 0 auto;
            padding: 0 20px;
        }

        /* Header Styles */
        header {
            padding: 2rem 0;
            text-align: center;
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            border-radius: 0 0 20px 20px;
            margin-bottom: 2rem;
            box-shadow: var(--shadow);
            position: relative;
            overflow: hidden;
        }

        header::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: url('data:image/svg+xml;utf8,<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 100 100" preserveAspectRatio="none"><path fill="rgba(255,255,255,0.05)" d="M0,0 L100,0 L100,100 L0,100 Z" /></svg>');
            background-size: cover;
            animation: pulse 15s infinite alternate;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            100% { transform: scale(1.05); }
        }

        header h1 {
            font-size: 2.5rem;
            margin-bottom: 0.5rem;
            animation: fadeIn 1s ease;
            position: relative;
            text-shadow: 0 2px 4px rgba(0,0,0,0.2);
        }

        header p {
            font-size: 1.2rem;
            opacity: 0.9;
            animation: fadeIn 1.5s ease;
            position: relative;
        }

        /* Theme Toggle */
        .theme-toggle {
            position: fixed;
            top: 20px;
            right: 20px;
            background: var(--card-color);
            border: none;
            width: 50px;
            height: 50px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: var(--shadow);
            z-index: 100;
            transition: var(--transition);
        }

        .theme-toggle:hover {
            transform: scale(1.1) rotate(15deg);
        }

        /* Floating Action Button */
        .fab {
            position: fixed;
            bottom: 30px;
            right: 30px;
            width: 60px;
            height: 60px;
            background-color: var(--primary-color);
            color: white;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            box-shadow: 0 4px 10px rgba(0, 0, 0, 0.2);
            z-index: 90;
            transition: var(--transition);
            animation: bounce 2s infinite;
        }

        .fab:hover {
            transform: scale(1.1);
            background-color: var(--secondary-color);
        }

        @keyframes bounce {
            0%, 100% { transform: translateY(0); }
            50% { transform: translateY(-10px); }
        }

        /* Section Styles */
        section {
            margin-bottom: 3rem;
            opacity: 0;
            transform: translateY(20px);
            transition: opacity 0.6s ease, transform 0.6s ease;
        }

        section.visible {
            opacity: 1;
            transform: translateY(0);
        }

        .section-title {
            font-size: 1.8rem;
            margin-bottom: 1.5rem;
            color: var(--primary-color);
            position: relative;
            display: inline-block;
        }

        .section-title::after {
            content: '';
            position: absolute;
            bottom: -8px;
            left: 0;
            width: 50%;
            height: 4px;
            background-color: var(--accent-color);
            border-radius: 2px;
            transition: var(--transition);
        }

        .section-title:hover::after {
            width: 100%;
        }

        /* Card Styles */
        .card {
            background-color: var(--card-color);
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: var(--shadow);
            margin-bottom: 2rem;
            transition: var(--transition);
            position: relative;
            overflow: hidden;
        }

        .card::after {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            width: 100%;
            height: 100%;
            background: linear-gradient(135deg, rgba(67, 97, 238, 0.03), rgba(72, 149, 239, 0.03));
            pointer-events: none;
        }

        .card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.15);
        }

        /* CGPA Calculator */
        .cgpa-calculator .input-group {
            margin-bottom: 1rem;
        }

        .cgpa-calculator label {
            display: block;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .cgpa-calculator input, 
        .cgpa-calculator select {
            width: 100%;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 5px;
            background-color: var(--card-color);
            color: var(--text-color);
            transition: var(--transition);
        }

        .cgpa-calculator input:focus, 
        .cgpa-calculator select:focus {
            outline: none;
            border-color: var(--primary-color);
            box-shadow: 0 0 0 2px rgba(67, 97, 238, 0.2);
        }

        .btn {
            background-color: var(--primary-color);
            color: white;
            border: none;
            padding: 0.8rem 1.5rem;
            border-radius: 5px;
            cursor: pointer;
            font-weight: 600;
            transition: var(--transition);
            display: inline-block;
            position: relative;
            overflow: hidden;
        }

        .btn::after {
            content: '';
            position: absolute;
            top: 50%;
            left: 50%;
            width: 5px;
            height: 5px;
            background: rgba(255, 255, 255, 0.5);
            opacity: 0;
            border-radius: 100%;
            transform: scale(1, 1) translate(-50%);
            transform-origin: 50% 50%;
        }

        .btn:focus:not(:active)::after {
            animation: ripple 0.6s ease-out;
        }

        @keyframes ripple {
            0% {
                transform: scale(0, 0);
                opacity: 0.5;
            }
            100% {
                transform: scale(20, 20);
                opacity: 0;
            }
        }

        .btn:hover {
            background-color: var(--secondary-color);
            transform: translateY(-2px);
            box-shadow: 0 5px 10px rgba(0, 0, 0, 0.1);
        }

        .btn-block {
            display: block;
            width: 100%;
        }

        .result {
            margin-top: 1.5rem;
            padding: 1rem;
            background-color: rgba(72, 149, 239, 0.1);
            border-radius: 5px;
            text-align: center;
            font-size: 1.2rem;
            display: none;
            animation: fadeIn 0.5s ease;
        }

        .result.show {
            display: block;
        }

        .semester-list {
            margin-top: 1rem;
        }

        .semester-item {
            display: flex;
            justify-content: space-between;
            padding: 0.8rem;
            background-color: rgba(67, 97, 238, 0.05);
            border-radius: 5px;
            margin-bottom: 0.5rem;
            transition: var(--transition);
        }

        .semester-item:hover {
            background-color: rgba(67, 97, 238, 0.1);
        }

        /* AI Tools Section */
        .ai-tools-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(250px, 1fr));
            gap: 1.5rem;
            margin-top: 1.5rem;
        }

        .ai-tool-card {
            background-color: var(--card-color);
            border-radius: 10px;
            padding: 1.5rem;
            box-shadow: var(--shadow);
            transition: var(--transition);
            text-align: center;
            border: 1px solid rgba(67, 97, 238, 0.1);
        }

        .ai-tool-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.1);
            border-color: var(--primary-color);
        }

        .ai-tool-icon {
            font-size: 2.5rem;
            margin-bottom: 1rem;
            color: var(--primary-color);
        }

        .ai-tool-title {
            font-size: 1.2rem;
            margin-bottom: 0.5rem;
            font-weight: 600;
        }

        .ai-tool-desc {
            font-size: 0.9rem;
            color: #777;
            margin-bottom: 1rem;
        }

        /* Chatbot Styles */
        .chatbot-container {
            position: fixed;
            bottom: 100px;
            right: 30px;
            width: 350px;
            background-color: var(--card-color);
            border-radius: 15px;
            box-shadow: 0 5px 25px rgba(0, 0, 0, 0.2);
            z-index: 1000;
            transform: translateY(20px);
            opacity: 0;
            transition: all 0.3s ease;
            overflow: hidden;
            display: none;
        }

        .chatbot-container.visible {
            transform: translateY(0);
            opacity: 1;
            display: block;
        }

        .chatbot-header {
            background: linear-gradient(135deg, var(--primary-color), var(--secondary-color));
            color: white;
            padding: 1rem;
            display: flex;
            justify-content: space-between;
            align-items: center;
            cursor: pointer;
        }

        .chatbot-title {
            font-weight: 600;
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .chatbot-close {
            background: none;
            border: none;
            color: white;
            font-size: 1.2rem;
            cursor: pointer;
        }

        .chatbot-messages {
            height: 300px;
            overflow-y: auto;
            padding: 1rem;
            background-color: var(--bg-color);
        }

        .message {
            margin-bottom: 1rem;
            max-width: 80%;
            padding: 0.8rem 1rem;
            border-radius: 15px;
            line-height: 1.4;
            position: relative;
            animation: fadeInUp 0.3s ease;
        }

        .bot-message {
            background-color: var(--primary-color);
            color: white;
            border-bottom-left-radius: 5px;
            align-self: flex-start;
            margin-right: auto;
        }

        .user-message {
            background-color: #e9ecef;
            color: var(--text-color);
            border-bottom-right-radius: 5px;
            align-self: flex-end;
            margin-left: auto;
        }

        .chatbot-input {
            display: flex;
            padding: 1rem;
            border-top: 1px solid #eee;
            background-color: var(--card-color);
        }

        .chatbot-input input {
            flex: 1;
            padding: 0.8rem;
            border: 1px solid #ddd;
            border-radius: 25px;
            margin-right: 0.5rem;
            background-color: var(--bg-color);
            color: var(--text-color);
        }

        .chatbot-send {
            background-color: var(--primary-color);
            color: white;
            border: none;
            width: 40px;
            height: 40px;
            border-radius: 50%;
            display: flex;
            align-items: center;
            justify-content: center;
            cursor: pointer;
            transition: var(--transition);
        }

        .chatbot-send:hover {
            background-color: var(--secondary-color);
            transform: rotate(10deg);
        }

        /* Typing indicator */
        .typing {
            display: inline-block;
            position: relative;
        }

        .typing-dot {
            display: inline-block;
            width: 8px;
            height: 8px;
            border-radius: 50%;
            background-color: white;
            margin-right: 3px;
            animation: typingAnimation 1.4s infinite ease-in-out;
        }

        .typing-dot:nth-child(1) {
            animation-delay: 0s;
        }

        .typing-dot:nth-child(2) {
            animation-delay: 0.2s;
        }

        .typing-dot:nth-child(3) {
            animation-delay: 0.4s;
            margin-right: 0;
        }

        @keyframes typingAnimation {
            0%, 60%, 100% { transform: translateY(0); }
            30% { transform: translateY(-5px); }
        }

        /* Responsive Design */
        @media (max-width: 768px) {
            header h1 {
                font-size: 2rem;
            }

            header p {
                font-size: 1rem;
            }

            .chatbot-container {
                width: 90%;
                right: 5%;
                bottom: 80px;
            }

            .ai-tools-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            .fab {
                width: 50px;
                height: 50px;
                bottom: 20px;
                right: 20px;
            }

            .chatbot-messages {
                height: 250px;
            }
        }
    </style>
</head>
<body>
    <!-- Theme Toggle Button -->
    <button class="theme-toggle" id="themeToggle">
        <i class="fas fa-moon"></i>
    </button>

    <!-- Floating Action Button -->
    <div class="fab" id="chatbotFab">
        <i class="fas fa-robot"></i>
    </div>

    <!-- Chatbot Container -->
    <div class="chatbot-container" id="chatbotContainer">
        <div class="chatbot-header" id="chatbotHeader">
            <div class="chatbot-title">
                <i class="fas fa-robot"></i>
                <span>Study Assistant</span>
            </div>
            <button class="chatbot-close" id="chatbotClose">
                <i class="fas fa-times"></i>
            </button>
        </div>
        <div class="chatbot-messages" id="chatbotMessages">
            <div class="message bot-message">
                Hi there! I'm your study assistant. How can I help you today?
            </div>
        </div>
        <div class="chatbot-input">
            <input type="text" id="chatbotInput" placeholder="Ask me anything...">
            <button class="chatbot-send" id="chatbotSend">
                <i class="fas fa-paper-plane"></i>
            </button>
        </div>
    </div>

    <!-- Header Section -->
    <header>
        <div class="container">
            <h1>Student Desk Pro</h1>
            <p>Your AI-powered engineering study companion</p>
        </div>
    </header>

    <main class="container">
        <!-- CGPA Calculator Section -->
        <section id="cgpaSection">
            <h2 class="section-title">CGPA Calculator</h2>
            <div class="card">
                <div class="input-group">
                    <label for="semesterGPA">Semester GPA</label>
                    <input type="number" id="semesterGPA" step="0.01" min="0" max="4" placeholder="Enter GPA (e.g., 3.75)">
                </div>
                <div class="input-group">
                    <label for="semesterCredits">Credits</label>
                    <input type="number" id="semesterCredits" min="1" placeholder="Enter credits (e.g., 15)">
                </div>
                <button class="btn btn-block" id="addSemester">Add Semester</button>
                
                <div class="semester-list" id="semesterList"></div>
                
                <button class="btn btn-block" id="calculateCGPA">Calculate CGPA</button>
                
                <div class="result" id="cgpaResult"></div>
            </div>
        </section>

        <!-- AI Tools Section -->
        <section id="aiToolsSection">
            <h2 class="section-title">AI Study Tools</h2>
            <div class="card">
                <div class="ai-tools-grid">
                    <div class="ai-tool-card">
                        <div class="ai-tool-icon">
                            <i class="fas fa-brain"></i>
                        </div>
                        <h3 class="ai-tool-title">Code Explainer</h3>
                        <p class="ai-tool-desc">Understand complex code snippets with AI explanations</p>
                        <button class="btn">Try It</button>
                    </div>
                    <div class="ai-tool-card">
                        <div class="ai-tool-icon">
                            <i class="fas fa-book"></i>
                        </div>
                        <h3 class="ai-tool-title">Concept Summarizer</h3>
                        <p class="ai-tool-desc">Get concise summaries of engineering concepts</p>
                        <button class="btn">Try It</button>
                    </div>
                    <div class="ai-tool-card">
                        <div class="ai-tool-icon">
                            <i class="fas fa-calculator"></i>
                        </div>
                        <h3 class="ai-tool-title">Math Solver</h3>
                        <p class="ai-tool-desc">Step-by-step solutions for complex equations</p>
                        <button class="btn">Try It</button>
                    </div>
                    <div class="ai-tool-card">
                        <div class="ai-tool-icon">
                            <i class="fas fa-chart-line"></i>
                        </div>
                        <h3 class="ai-tool-title">Data Visualizer</h3>
                        <p class="ai-tool-desc">Transform raw data into interactive visualizations</p>
                        <button class="btn">Try It</button>
                    </div>
                </div>
            </div>
        </section>

        <!-- Unit Converter Section -->
        <section id="unitConverterSection">
            <h2 class="section-title">Unit Converter</h2>
            <div class="card">
                <div class="converter">
                    <div class="converter-row">
                        <div class="converter-input">
                            <label for="converterValue">Value</label>
                            <input type="number" id="converterValue" placeholder="Enter value">
                        </div>
                        <div class="converter-input">
                            <label for="converterFrom">From</label>
                            <select id="converterFrom">
                                <option value="cm">Centimeters</option>
                                <option value="m">Meters</option>
                                <option value="km">Kilometers</option>
                                <option value="in">Inches</option>
                                <option value="ft">Feet</option>
                                <option value="mi">Miles</option>
                                <option value="°C">Celsius</option>
                                <option value="°F">Fahrenheit</option>
                                <option value="K">Kelvin</option>
                                <option value="g">Grams</option>
                                <option value="kg">Kilograms</option>
                                <option value="lb">Pounds</option>
                            </select>
                        </div>
                        <div class="converter-input">
                            <label for="converterTo">To</label>
                            <select id="converterTo">
                                <option value="cm">Centimeters</option>
                                <option value="m">Meters</option>
                                <option value="km">Kilometers</option>
                                <option value="in">Inches</option>
                                <option value="ft">Feet</option>
                                <option value="mi">Miles</option>
                                <option value="°C">Celsius</option>
                                <option value="°F">Fahrenheit</option>
                                <option value="K">Kelvin</option>
                                <option value="g">Grams</option>
                                <option value="kg">Kilograms</option>
                                <option value="lb">Pounds</option>
                            </select>
                        </div>
                    </div>
                    <button class="btn btn-block" id="convertBtn">Convert</button>
                    <div class="result" id="converterResult"></div>
                </div>
            </div>
        </section>

        <!-- Notes Section -->
        <section id="notesSection">
            <h2 class="section-title">Quick Notes</h2>
            <div class="card">
                <div class="notes-container" id="notesContainer"></div>
                
                <div class="add-note-form">
                    <h3>Add New Note</h3>
                    <div class="form-group">
                        <label for="noteTitle">Title</label>
                        <input type="text" id="noteTitle" placeholder="Enter note title">
                    </div>
                    <div class="form-group">
                        <label for="noteContent">Content</label>
                        <textarea id="noteContent" placeholder="Write your note here..."></textarea>
                    </div>
                    <button class="btn" id="saveNote">Save Note</button>
                </div>
            </div>
        </section>

        <!-- Resources Section -->
        <section id="resourcesSection">
            <h2 class="section-title">Useful Resources</h2>
            <div class="card">
                <div class="resources-grid">
                    <div class="resource-card">
                        <div class="resource-icon"><i class="fab fa-github"></i></div>
                        <div class="resource-name">GitHub</div>
                        <a href="https://github.com" class="resource-link" target="_blank">Visit</a>
                    </div>
                    <div class="resource-card">
                        <div class="resource-icon"><i class="fas fa-code"></i></div>
                        <div class="resource-name">GeeksforGeeks</div>
                        <a href="https://geeksforgeeks.org" class="resource-link" target="_blank">Visit</a>
                    </div>
                    <div class="resource-card">
                        <div class="resource-icon"><i class="fab fa-stack-overflow"></i></div>
                        <div class="resource-name">Stack Overflow</div>
                        <a href="https://stackoverflow.com" class="resource-link" target="_blank">Visit</a>
                    </div>
                    <div class="resource-card">
                        <div class="resource-icon"><i class="fas fa-graduation-cap"></i></div>
                        <div class="resource-name">NPTEL</div>
                        <a href="https://nptel.ac.in" class="resource-link" target="_blank">Visit</a>
                    </div>
                    <div class="resource-card">
                        <div class="resource-icon"><i class="fab fa-youtube"></i></div>
                        <div class="resource-name">YouTube</div>
                        <a href="https://youtube.com" class="resource-link" target="_blank">Visit</a>
                    </div>
                    <div class="resource-card">
                        <div class="resource-icon"><i class="fas fa-book"></i></div>
                        <div class="resource-name">Coursera</div>
                        <a href="https://coursera.org" class="resource-link" target="_blank">Visit</a>
                    </div>
                </div>
            </div>
        </section>

        <!-- Motivational Quote Section -->
        <section id="motivationSection">
            <h2 class="section-title">Daily Motivation</h2>
            <div class="card">
                <div class="quote-container" id="quoteContainer">
                    <div class="quote-text" id="quoteText">Loading motivational quote...</div>
                    <div class="quote-author" id="quoteAuthor"></div>
                    <button class="btn refresh-quote" id="refreshQuote">New Quote</button>
                </div>
            </div>
        </section>
    </main>

    <footer>
        <div class="container">
            <p>© 2023 Student Desk Pro | AI-Powered Engineering Companion</p>
        </div>
    </footer>

    <script>
        // Theme Toggle Functionality
        const themeToggle = document.getElementById('themeToggle');
        const body = document.body;
        const icon = themeToggle.querySelector('i');

        // Check for saved theme preference or use preferred color scheme
        const savedTheme = localStorage.getItem('theme') || 
                          (window.matchMedia('(prefers-color-scheme: dark)').matches ? 'dark' : 'light');

        // Apply the saved theme
        if (savedTheme === 'dark') {
            body.classList.add('dark-mode');
            icon.classList.remove('fa-moon');
            icon.classList.add('fa-sun');
        }

        // Toggle theme on button click
        themeToggle.addEventListener('click', () => {
            body.classList.toggle('dark-mode');
            
            if (body.classList.contains('dark-mode')) {
                icon.classList.remove('fa-moon');
                icon.classList.add('fa-sun');
                localStorage.setItem('theme', 'dark');
            } else {
                icon.classList.remove('fa-sun');
                icon.classList.add('fa-moon');
                localStorage.setItem('theme', 'light');
            }
        });

        // Scroll Animation for Sections
        const sections = document.querySelectorAll('section');
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('visible');
                }
            });
        }, { threshold: 0.1 });

        sections.forEach(section => {
            observer.observe(section);
        });

        // Chatbot Functionality
        const chatbotFab = document.getElementById('chatbotFab');
        const chatbotContainer = document.getElementById('chatbotContainer');
        const chatbotClose = document.getElementById('chatbotClose');
        const chatbotMessages = document.getElementById('chatbotMessages');
        const chatbotInput = document.getElementById('chatbotInput');
        const chatbotSend = document.getElementById('chatbotSend');
        const chatbotHeader = document.getElementById('chatbotHeader');

        let chatbotOpen = false;

        // Toggle chatbot visibility
        function toggleChatbot() {
            chatbotOpen = !chatbotOpen;
            if (chatbotOpen) {
                chatbotContainer.classList.add('visible');
                chatbotInput.focus();
            } else {
                chatbotContainer.classList.remove('visible');
            }
        }

        chatbotFab.addEventListener('click', toggleChatbot);
        chatbotClose.addEventListener('click', toggleChatbot);
        chatbotHeader.addEventListener('click', toggleChatbot);

        // Add message to chat
        function addMessage(text, isUser = false) {
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${isUser ? 'user-message' : 'bot-message'}`;
            messageDiv.textContent = text;
            chatbotMessages.appendChild(messageDiv);
            chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
        }

        // Simulate typing indicator
        function showTypingIndicator() {
            const typingDiv = document.createElement('div');
            typingDiv.className = 'message bot-message';
            typingDiv.innerHTML = `
                <div class="typing">
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                    <div class="typing-dot"></div>
                </div>
            `;
            chatbotMessages.appendChild(typingDiv);
            chatbotMessages.scrollTop = chatbotMessages.scrollHeight;
            return typingDiv;
        }

        // Remove typing indicator
        function removeTypingIndicator(typingDiv) {
            typingDiv.remove();
        }

        // Chatbot responses
        const botResponses = [
            {
                keywords: ['hello', 'hi', 'hey'],
                response: 'Hello! How can I help you with your studies today?'
            },
            {
                keywords: ['cgpa', 'gpa', 'grade'],
                response: 'You can use the CGPA calculator tool above to calculate your cumulative GPA. Just add your semester GPAs and credits!'
            },
            {
                keywords: ['note', 'notes'],
                response: 'The notes section lets you save and organize your study notes. They\'re saved in your browser so you can access them anytime!'
            },
            {
                keywords: ['convert', 'converter', 'unit'],
                response: 'The unit converter can help you convert between different measurement units for length, temperature, and weight.'
            },
            {
                keywords: ['resource', 'website', 'reference'],
                response: 'Check out the resources section for quick links to helpful engineering websites like GitHub and Stack Overflow.'
            },
            {
                keywords: ['ai', 'tool', 'tools'],
                response: 'The AI tools section includes several helpful tools like code explanation, concept summarization, and math solving.'
            },
            {
                keywords: ['thank', 'thanks'],
                response: 'You\'re welcome! Happy studying! 😊'
            },
            {
                keywords: ['bye', 'goodbye'],
                response: 'Goodbye! Come back if you need more study help!'
            }
        ];

        // Default response if no keywords match
        const defaultResponse = "I'm not sure I understand. I can help with CGPA calculations, unit conversions, note-taking, and more. Try asking about one of these topics!";

        // Process user input
        function processUserInput() {
            const userText = chatbotInput.value.trim();
            if (!userText) return;

            addMessage(userText, true);
            chatbotInput.value = '';

            // Show typing indicator
            const typingIndicator = showTypingIndicator();

            // Simulate thinking delay
            setTimeout(() => {
                removeTypingIndicator(typingIndicator);

                // Find matching response
                const lowerText = userText.toLowerCase();
                let response = defaultResponse;

                for (const item of botResponses) {
                    if (item.keywords.some(keyword => lowerText.includes(keyword))) {
                        response = item.response;
                        break;
                    }
                }

                addMessage(response);
            }, 1000 + Math.random() * 1000); // Random delay between 1-2 seconds
        }

        // Send message on button click or Enter key
        chatbotSend.addEventListener('click', processUserInput);
        chatbotInput.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                processUserInput();
            }
        });

        // Initialize with welcome message
        addMessage("Hi there! I'm your study assistant. I can help you with CGPA calculations, unit conversions, note-taking, and more. Try asking me something!");

        // CGPA Calculator Functionality
        const semesters = [];
        const addSemesterBtn = document.getElementById('addSemester');
        const calculateCGPABtn = document.getElementById('calculateCGPA');
        const semesterList = document.getElementById('semesterList');
        const cgpaResult = document.getElementById('cgpaResult');

        addSemesterBtn.addEventListener('click', () => {
            const gpa = parseFloat(document.getElementById('semesterGPA').value);
            const credits = parseInt(document.getElementById('semesterCredits').value);
            
            if (isNaN(gpa) || isNaN(credits)) {
                alert('Please enter valid GPA and credits');
                return;
            }
            
            if (gpa < 0 || gpa > 4) {
                alert('GPA must be between 0 and 4');
                return;
            }
            
            if (credits <= 0) {
                alert('Credits must be greater than 0');
                return;
            }
            
            semesters.push({ gpa, credits });
            updateSemesterList();
            
            // Clear inputs
            document.getElementById('semesterGPA').value = '';
            document.getElementById('semesterCredits').value = '';
        });

        function updateSemesterList() {
            semesterList.innerHTML = '';
            
            if (semesters.length === 0) {
                semesterList.innerHTML = '<p>No semesters added yet</p>';
                return;
            }
            
            semesters.forEach((sem, index) => {
                const semItem = document.createElement('div');
                semItem.className = 'semester-item';
                semItem.innerHTML = `
                    <span>Semester ${index + 1}: GPA ${sem.gpa.toFixed(2)}, Credits ${sem.credits}</span>
                    <button class="delete-semester" data-index="${index}"><i class="fas fa-trash"></i></button>
                `;
                semesterList.appendChild(semItem);
            });
            
            // Add event listeners to delete buttons
            document.querySelectorAll('.delete-semester').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const index = parseInt(e.target.closest('button').dataset.index);
                    semesters.splice(index, 1);
                    updateSemesterList();
                });
            });
        }

        calculateCGPABtn.addEventListener('click', () => {
            if (semesters.length === 0) {
                alert('Please add at least one semester');
                return;
            }
            
            let totalCredits = 0;
            let totalGradePoints = 0;
            
            semesters.forEach(sem => {
                totalGradePoints += sem.gpa * sem.credits;
                totalCredits += sem.credits;
            });
            
            const cgpa = totalGradePoints / totalCredits;
            
            cgpaResult.innerHTML = `
                <p>Your CGPA is: <strong>${cgpa.toFixed(2)}</strong></p>
                <p>Total Credits: ${totalCredits}</p>
            `;
            cgpaResult.classList.add('show');
        });

        // Unit Converter Functionality
        const convertBtn = document.getElementById('convertBtn');
        const converterResult = document.getElementById('converterResult');

        convertBtn.addEventListener('click', () => {
            const value = parseFloat(document.getElementById('converterValue').value);
            const fromUnit = document.getElementById('converterFrom').value;
            const toUnit = document.getElementById('converterTo').value;
            
            if (isNaN(value)) {
                alert('Please enter a valid number');
                return;
            }
            
            let result;
            
            // Length conversions
            if (['cm', 'm', 'km', 'in', 'ft', 'mi'].includes(fromUnit) && 
                ['cm', 'm', 'km', 'in', 'ft', 'mi'].includes(toUnit)) {
                result = convertLength(value, fromUnit, toUnit);
            }
            // Temperature conversions
            else if (['°C', '°F', 'K'].includes(fromUnit) && 
                     ['°C', '°F', 'K'].includes(toUnit)) {
                result = convertTemperature(value, fromUnit, toUnit);
            }
            // Weight conversions
            else if (['g', 'kg', 'lb'].includes(fromUnit) && 
                     ['g', 'kg', 'lb'].includes(toUnit)) {
                result = convertWeight(value, fromUnit, toUnit);
            }
            else {
                alert('Cannot convert between different measurement types');
                return;
            }
            
            converterResult.innerHTML = `
                <p>${value} ${fromUnit} = <strong>${result.toFixed(4)} ${toUnit}</strong></p>
            `;
            converterResult.classList.add('show');
        });

        function convertLength(value, fromUnit, toUnit) {
            // Convert to meters first
            let meters;
            switch (fromUnit) {
                case 'cm': meters = value / 100; break;
                case 'm': meters = value; break;
                case 'km': meters = value * 1000; break;
                case 'in': meters = value * 0.0254; break;
                case 'ft': meters = value * 0.3048; break;
                case 'mi': meters = value * 1609.344; break;
            }
            
            // Convert from meters to target unit
            switch (toUnit) {
                case 'cm': return meters * 100;
                case 'm': return meters;
                case 'km': return meters / 1000;
                case 'in': return meters / 0.0254;
                case 'ft': return meters / 0.3048;
                case 'mi': return meters / 1609.344;
            }
        }

        function convertTemperature(value, fromUnit, toUnit) {
            // Convert to Celsius first
            let celsius;
            switch (fromUnit) {
                case '°C': celsius = value; break;
                case '°F': celsius = (value - 32) * 5/9; break;
                case 'K': celsius = value - 273.15; break;
            }
            
            // Convert from Celsius to target unit
            switch (toUnit) {
                case '°C': return celsius;
                case '°F': return (celsius * 9/5) + 32;
                case 'K': return celsius + 273.15;
            }
        }

        function convertWeight(value, fromUnit, toUnit) {
            // Convert to grams first
            let grams;
            switch (fromUnit) {
                case 'g': grams = value; break;
                case 'kg': grams = value * 1000; break;
                case 'lb': grams = value * 453.592; break;
            }
            
            // Convert from grams to target unit
            switch (toUnit) {
                case 'g': return grams;
                case 'kg': return grams / 1000;
                case 'lb': return grams / 453.592;
            }
        }

        // Notes Functionality with Local Storage
        const notesContainer = document.getElementById('notesContainer');
        const saveNoteBtn = document.getElementById('saveNote');
        let notes = JSON.parse(localStorage.getItem('notes')) || [];
        let editNoteId = null;

        // Display existing notes on page load
        function displayNotes() {
            notesContainer.innerHTML = '';
            
            if (notes.length === 0) {
                notesContainer.innerHTML = '<p>No notes yet. Add your first note!</p>';
                return;
            }
            
            notes.forEach((note, index) => {
                const noteCard = document.createElement('div');
                noteCard.className = 'note-card';
                noteCard.innerHTML = `
                    <h3 class="note-title">${note.title}</h3>
                    <span class="note-date">${new Date(note.date).toLocaleString()}</span>
                    <div class="note-content">${note.content}</div>
                    <div class="note-actions">
                        <button class="note-btn edit-btn" data-id="${index}"><i class="fas fa-edit"></i> Edit</button>
                        <button class="note-btn delete-btn" data-id="${index}"><i class="fas fa-trash"></i> Delete</button>
                        <button class="note-btn download-btn" data-id="${index}"><i class="fas fa-download"></i> Download</button>
                    </div>
                `;
                notesContainer.appendChild(noteCard);
            });
            
            // Add event listeners to action buttons
            document.querySelectorAll('.edit-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.target.closest('button').dataset.id);
                    editNote(id);
                });
            });
            
            document.querySelectorAll('.delete-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.target.closest('button').dataset.id);
                    deleteNote(id);
                });
            });
            
            document.querySelectorAll('.download-btn').forEach(btn => {
                btn.addEventListener('click', (e) => {
                    const id = parseInt(e.target.closest('button').dataset.id);
                    downloadNote(id);
                });
            });
        }

        function saveNote() {
            const title = document.getElementById('noteTitle').value.trim();
            const content = document.getElementById('noteContent').value.trim();
            
            if (!title || !content) {
                alert('Please enter both title and content');
                return;
            }
            
            const now = new Date();
            
            if (editNoteId !== null) {
                // Update existing note
                notes[editNoteId] = { title, content, date: now };
                editNoteId = null;
            } else {
                // Add new note
                notes.push({ title, content, date: now });
            }
            
            // Save to local storage
            localStorage.setItem('notes', JSON.stringify(notes));
            
            // Refresh display
            displayNotes();
            
            // Clear form
            document.getElementById('noteTitle').value = '';
            document.getElementById('noteContent').value = '';
            
            // Change button text back if it was in edit mode
            saveNoteBtn.textContent = 'Save Note';
        }

        function editNote(id) {
            const note = notes[id];
            document.getElementById('noteTitle').value = note.title;
            document.getElementById('noteContent').value = note.content;
            editNoteId = id;
            saveNoteBtn.textContent = 'Update Note';
            
            // Scroll to form
            document.getElementById('noteTitle').focus();
        }

        function deleteNote(id) {
            if (confirm('Are you sure you want to delete this note?')) {
                notes.splice(id, 1);
                localStorage.setItem('notes', JSON.stringify(notes));
                displayNotes();
            }
        }

        function downloadNote(id) {
            const note = notes[id];
            const content = `${note.title}\n\n${note.content}\n\nCreated: ${new Date(note.date).toLocaleString()}`;
            const blob = new Blob([content], { type: 'text/plain' });
            const url = URL.createObjectURL(blob);
            const a = document.createElement('a');
            a.href = url;
            a.download = `${note.title.replace(/[^a-z0-9]/gi, '_').toLowerCase()}_note.txt`;
            document.body.appendChild(a);
            a.click();
            document.body.removeChild(a);
            URL.revokeObjectURL(url);
        }

        saveNoteBtn.addEventListener('click', saveNote);

        // Motivational Quote Functionality
        const quoteText = document.getElementById('quoteText');
        const quoteAuthor = document.getElementById('quoteAuthor');
        const refreshQuoteBtn = document.getElementById('refreshQuote');

        function fetchQuote() {
            fetch('https://type.fit/api/quotes')
                .then(response => response.json())
                .then(data => {
                    const randomQuote = data[Math.floor(Math.random() * data.length)];
                    quoteText.textContent = `"${randomQuote.text}"`;
                    quoteAuthor.textContent = randomQuote.author || 'Unknown';
                })
                .catch(error => {
                    console.error('Error fetching quote:', error);
                    quoteText.textContent = '"The only way to do great work is to love what you do."';
                    quoteAuthor.textContent = 'Steve Jobs';
                });
        }

        refreshQuoteBtn.addEventListener('click', fetchQuote);

        // Initialize the page
        document.addEventListener('DOMContentLoaded', () => {
            updateSemesterList();
            displayNotes();
            fetchQuote();
            
            // Make all sections visible initially (fallback if IntersectionObserver fails)
            setTimeout(() => {
                sections.forEach(section => {
                    section.classList.add('visible');
                });
            }, 500);
        });


        // AI Tools Module - Complete Implementation
document.addEventListener('DOMContentLoaded', function() {
    // AI Tools Container
    const aiToolsContainer = document.getElementById('aiToolsSection');
    
    // Simulated API Key (in a real app, this would be securely stored)
    const SIMULATED_API_KEY = 'sk_studentdesk_ai_tools_12345';
    
    // AI Tools Configuration
    const aiTools = {
        codeExplainer: {
            name: 'Code Explainer',
            icon: 'fas fa-brain',
            description: 'Understand complex code snippets with AI explanations',
            endpoint: 'https://api.studentdesk.ai/v1/code/explain',
            prompt: "Explain this code snippet in simple terms, focusing on how it works and what each important part does:"
        },
        conceptSummarizer: {
            name: 'Concept Summarizer',
            icon: 'fas fa-book',
            description: 'Get concise summaries of engineering concepts',
            endpoint: 'https://api.studentdesk.ai/v1/concepts/summarize',
            prompt: "Provide a concise summary of this engineering concept, focusing on key principles and applications:"
        },
        mathSolver: {
            name: 'Math Solver',
            icon: 'fas fa-calculator',
            description: 'Step-by-step solutions for complex equations',
            endpoint: 'https://api.studentdesk.ai/v1/math/solve',
            prompt: "Solve this math problem showing all steps and explaining each step clearly:"
        },
        dataVisualizer: {
            name: 'Data Visualizer',
            icon: 'fas fa-chart-line',
            description: 'Transform raw data into interactive visualizations',
            endpoint: 'https://api.studentdesk.ai/v1/data/visualize',
            prompt: "Analyze this dataset and suggest the best visualization approach with explanation:"
        }
    };
    
    // Modal for AI Tools
    const modalHTML = `
    <div class="ai-modal" id="aiModal">
        <div class="ai-modal-content">
            <div class="ai-modal-header">
                <h3 id="aiModalTitle">AI Tool</h3>
                <button class="ai-modal-close">&times;</button>
            </div>
            <div class="ai-modal-body">
                <div class="ai-tool-input-container">
                    <textarea id="aiToolInput" placeholder="Enter your input here..."></textarea>
                    <button class="btn" id="aiToolSubmit">Process</button>
                </div>
                <div class="ai-tool-result" id="aiToolResult">
                    <div class="loading-spinner" id="aiToolLoading">
                        <div class="spinner"></div>
                        <p>AI is thinking...</p>
                    </div>
                    <div class="result-content" id="aiToolResultContent"></div>
                </div>
            </div>
        </div>
    </div>
    `;
    
    // Add modal to DOM
    document.body.insertAdjacentHTML('beforeend', modalHTML);
    
    // Current active tool
    let currentTool = null;
    
    // Initialize AI Tools
    function initAITools() {
        const toolsGrid = aiToolsContainer.querySelector('.ai-tools-grid');
        
        // Create tool cards
        Object.keys(aiTools).forEach(toolKey => {
            const tool = aiTools[toolKey];
            const toolCard = document.createElement('div');
            toolCard.className = 'ai-tool-card';
            toolCard.innerHTML = `
                <div class="ai-tool-icon">
                    <i class="${tool.icon}"></i>
                </div>
                <h3 class="ai-tool-title">${tool.name}</h3>
                <p class="ai-tool-desc">${tool.description}</p>
                <button class="btn try-tool-btn" data-tool="${toolKey}">Try It</button>
            `;
            toolsGrid.appendChild(toolCard);
        });
        
        // Add event listeners to tool buttons
        document.querySelectorAll('.try-tool-btn').forEach(btn => {
            btn.addEventListener('click', function() {
                const toolKey = this.getAttribute('data-tool');
                openAITool(toolKey);
            });
        });
        
        // Modal close button
        document.querySelector('.ai-modal-close').addEventListener('click', closeAIModal);
    }
    
    // Open AI Tool Modal
    function openAITool(toolKey) {
        currentTool = aiTools[toolKey];
        const modal = document.getElementById('aiModal');
        const modalTitle = document.getElementById('aiModalTitle');
        
        modalTitle.textContent = currentTool.name;
        document.getElementById('aiToolInput').value = '';
        document.getElementById('aiToolResultContent').innerHTML = '';
        document.getElementById('aiToolLoading').style.display = 'none';
        
        modal.style.display = 'block';
        document.getElementById('aiToolInput').focus();
        
        // Add event listener for submit button
        document.getElementById('aiToolSubmit').onclick = processAIRequest;
    }
    
    // Close AI Modal
    function closeAIModal() {
        document.getElementById('aiModal').style.display = 'none';
        currentTool = null;
    }
    
    // Process AI Request
    function processAIRequest() {
        const input = document.getElementById('aiToolInput').value.trim();
        if (!input) {
            alert('Please enter some input to process');
            return;
        }
        
        const loadingElement = document.getElementById('aiToolLoading');
        const resultContent = document.getElementById('aiToolResultContent');
        
        // Show loading state
        loadingElement.style.display = 'flex';
        resultContent.innerHTML = '';
        
        // Simulate API call with timeout
        setTimeout(() => {
            // This would be replaced with actual API call in production
            simulateAIResponse(currentTool, input)
                .then(response => {
                    loadingElement.style.display = 'none';
                    resultContent.innerHTML = formatAIResponse(response);
                })
                .catch(error => {
                    loadingElement.style.display = 'none';
                    resultContent.innerHTML = `
                        <div class="ai-error">
                            <i class="fas fa-exclamation-triangle"></i>
                            <p>Error: ${error.message}</p>
                        </div>
                    `;
                });
        }, 1500);
    }
    
    // Simulate AI Response (would be replaced with real API call)
    function simulateAIResponse(tool, input) {
        return new Promise((resolve, reject) => {
            // Simulate network failure 10% of the time
            if (Math.random() < 0.1) {
                reject(new Error('Network error. Please try again later.'));
                return;
            }
            
            // Simulate different responses based on tool
            setTimeout(() => {
                let response;
                
                switch (tool.name) {
                    case 'Code Explainer':
                        response = {
                            explanation: `The provided code appears to ${describeCodePurpose(input)}. Here's a breakdown:
                            
1. **Structure**: ${codeStructureAnalysis(input)}
2. **Key Functions**: ${identifyKeyFunctions(input)}
3. **Algorithm**: ${describeAlgorithm(input)}
4. **Complexity**: ${estimateComplexity(input)}

This code is typically used for ${suggestCodeUsage(input)}. A more efficient approach might be ${suggestImprovements(input)}.`,
                            suggestions: [
                                'Consider adding comments for clarity',
                                'Refactor into smaller functions for better maintainability',
                                'Add error handling for edge cases'
                            ]
                        };
                        break;
                        
                    case 'Concept Summarizer':
                        response = {
                            summary: `The concept of "${input}" can be summarized as follows:
                            
**Core Principle**: ${generateRandomPhrase('principle')}
**Key Applications**: ${generateRandomPhrase('applications')}
**Related Concepts**: ${generateRandomPhrase('related')}

In engineering, this concept is particularly important for ${generateRandomPhrase('importance')}.`,
                            keyPoints: [
                                generateRandomPhrase('point1'),
                                generateRandomPhrase('point2'),
                                generateRandomPhrase('point3')
                            ]
                        };
                        break;
                        
                    case 'Math Solver':
                        const equation = input.split('=')[0] || input;
                        response = {
                            solution: `Solution for "${input}":
                            
1. **Step 1**: ${generateMathStep(equation, 1)}
2. **Step 2**: ${generateMathStep(equation, 2)}
3. **Step 3**: ${generateMathStep(equation, 3)}
4. **Verification**: ${generateMathVerification(input)}

Final Answer: **${generateMathAnswer(input)}**`,
                            explanation: `This problem involves ${generateMathConcept(input)}. The key principle used here is ${generateRandomPhrase('math principle')}.`
                        };
                        break;
                        
                    case 'Data Visualizer':
                        response = {
                            recommendation: `For the given data about "${input.substring(0, 30)}...", I recommend:
                            
**Best Visualization**: ${recommendChartType(input)}
**Why**: ${explainChartChoice(input)}

**Key Insights**:
- ${generateDataInsight(input, 1)}
- ${generateDataInsight(input, 2)}
- ${generateDataInsight(input, 3)}

**Example Visualization Code**:
\`\`\`python
${generateExampleVisualizationCode(input)}
\`\`\``,
                            notes: [
                                'Consider normalizing the data if scales vary significantly',
                                'Add clear labels and legends',
                                'Use color purposefully to highlight important data points'
                            ]
                        };
                        break;
                        
                    default:
                        response = {
                            answer: `I've analyzed your input about "${input.substring(0, 50)}..." and here's what I found:
                            
${generateDetailedResponse(input)}`,
                            additionalInfo: [
                                'You might also want to consider:',
                                generateRandomPhrase('consider1'),
                                generateRandomPhrase('consider2')
                            ]
                        };
                }
                
                resolve(response);
            }, 1000 + Math.random() * 2000); // Random delay between 1-3 seconds
        });
    }
    
    // Format AI Response for Display
    function formatAIResponse(response) {
        let html = '';
        
        // Handle different response structures
        if (response.explanation) {
            html += `<div class="ai-section">
                <h4>Code Explanation</h4>
                <div class="ai-explanation">${response.explanation.replace(/\n/g, '<br>')}</div>
            </div>`;
            
            if (response.suggestions) {
                html += `<div class="ai-section">
                    <h4>Suggestions for Improvement</h4>
                    <ul class="ai-suggestions">${
                        response.suggestions.map(s => `<li>${s}</li>`).join('')
                    }</ul>
                </div>`;
            }
        }
        else if (response.summary) {
            html += `<div class="ai-section">
                <h4>Concept Summary</h4>
                <div class="ai-summary">${response.summary.replace(/\n/g, '<br>')}</div>
            </div>`;
            
            if (response.keyPoints) {
                html += `<div class="ai-section">
                    <h4>Key Points</h4>
                    <ul class="ai-key-points">${
                        response.keyPoints.map(p => `<li>${p}</li>`).join('')
                    }</ul>
                </div>`;
            }
        }
        else if (response.solution) {
            html += `<div class="ai-section">
                <h4>Step-by-Step Solution</h4>
                <div class="ai-solution">${response.solution.replace(/\n/g, '<br>')}</div>
            </div>`;
            
            if (response.explanation) {
                html += `<div class="ai-section">
                    <h4>Conceptual Explanation</h4>
                    <div class="ai-explanation">${response.explanation}</div>
                </div>`;
            }
        }
        else if (response.recommendation) {
            html += `<div class="ai-section">
                <h4>Visualization Recommendation</h4>
                <div class="ai-recommendation">${response.recommendation.replace(/\n/g, '<br>')}</div>
            </div>`;
            
            if (response.notes) {
                html += `<div class="ai-section">
                    <h4>Design Notes</h4>
                    <ul class="ai-notes">${
                        response.notes.map(n => `<li>${n}</li>`).join('')
                    }</ul>
                </div>`;
            }
        }
        else {
            // Default response format
            html += `<div class="ai-section">
                <div class="ai-answer">${response.answer.replace(/\n/g, '<br>')}</div>
            </div>`;
            
            if (response.additionalInfo) {
                html += `<div class="ai-section">
                    <ul class="ai-additional-info">${
                        response.additionalInfo.map(i => `<li>${i}</li>`).join('')
                    }</ul>
                </div>`;
            }
        }
        
        // Add copy button
        html += `<button class="btn ai-copy-btn" id="aiCopyResult">
            <i class="fas fa-copy"></i> Copy to Clipboard
        </button>`;
        
        // Add event listener for copy button
        setTimeout(() => {
            document.getElementById('aiCopyResult').addEventListener('click', copyAIResult);
        }, 100);
        
        return html;
    }
    
    // Copy AI Result to Clipboard
    function copyAIResult() {
        const resultContent = document.getElementById('aiToolResultContent').textContent;
        navigator.clipboard.writeText(resultContent)
            .then(() => {
                const btn = document.getElementById('aiCopyResult');
                btn.innerHTML = '<i class="fas fa-check"></i> Copied!';
                setTimeout(() => {
                    btn.innerHTML = '<i class="fas fa-copy"></i> Copy to Clipboard';
                }, 2000);
            })
            .catch(err => {
                console.error('Failed to copy: ', err);
            });
    }
    
    // Helper Functions for Simulated Responses
    function describeCodePurpose(code) {
        const purposes = [
            'implement a sorting algorithm',
            'handle data processing',
            'manage user authentication',
            'perform mathematical calculations',
            'interact with a database',
            'process input/output operations',
            'implement a search functionality'
        ];
        return purposes[Math.floor(Math.random() * purposes.length)];
    }
    
    function codeStructureAnalysis(code) {
        const structures = [
            'the code follows a modular approach with clear separation of concerns',
            'this appears to be a monolithic implementation with all logic in one place',
            'the code is organized into several helper functions around a main function',
            'this implementation uses object-oriented principles with class definitions',
            'the structure follows a functional programming paradigm'
        ];
        return structures[Math.floor(Math.random() * structures.length)];
    }
    
    function identifyKeyFunctions(code) {
        const functions = [
            'the main processing happens in the calculate() function',
            'the core logic is contained within the processData() method',
            'the algorithm is primarily implemented in the sort() function',
            'the key operations are handleInput() and generateOutput()',
            'the important functions are initialize(), run(), and cleanup()'
        ];
        return functions[Math.floor(Math.random() * functions.length)];
    }
    
    function describeAlgorithm(code) {
        const algorithms = [
            'a recursive divide-and-conquer approach',
            'an iterative solution with O(n) complexity',
            'a brute-force method with O(n²) complexity',
            'a dynamic programming solution',
            'a greedy algorithm that makes locally optimal choices',
            'a backtracking implementation'
        ];
        return algorithms[Math.floor(Math.random() * algorithms.length)];
    }
    
    function estimateComplexity(code) {
        const complexities = [
            'O(n) time complexity with O(1) space',
            'O(n log n) time complexity with O(n) space',
            'O(n²) time complexity with O(1) space',
            'O(log n) time complexity with O(n) space',
            'O(n³) time complexity with O(n²) space'
        ];
        return complexities[Math.floor(Math.random() * complexities.length)];
    }
    
    function suggestCodeUsage(code) {
        const usages = [
            'processing large datasets in data science applications',
            'real-time systems where performance is critical',
            'educational purposes to demonstrate algorithms',
            'backend services handling API requests',
            'embedded systems with limited resources'
        ];
        return usages[Math.floor(Math.random() * usages.length)];
    }
    
    function suggestImprovements(code) {
        const improvements = [
            'using a hash table to reduce time complexity',
            'implementing memoization to avoid redundant calculations',
            'parallelizing the computation across multiple threads',
            'using a more efficient data structure like a heap or tree',
            'applying algorithmic optimizations specific to the problem domain'
        ];
        return improvements[Math.floor(Math.random() * improvements.length)];
    }
    
    function generateRandomPhrase(type) {
        const phrases = {
            principle: [
                'the transformation of energy from one form to another',
                'the relationship between force, mass, and acceleration',
                'the conservation of matter in closed systems',
                'the wave-particle duality of matter',
                'the thermodynamic principles governing heat transfer'
            ],
            applications: [
                'mechanical engineering systems and structural design',
                'electrical circuits and signal processing',
                'chemical reaction engineering',
                'computer algorithm design and optimization',
                'aerospace propulsion systems'
            ],
            related: [
                'Newtonian mechanics and quantum physics',
                'thermodynamics and statistical mechanics',
                'circuit theory and electromagnetic fields',
                'fluid dynamics and continuum mechanics',
                'data structures and computational complexity'
            ],
            importance: [
                'designing efficient systems with minimal energy loss',
                'understanding fundamental physical constraints',
                'optimizing processes for maximum output',
                'ensuring safety and reliability in engineering designs',
                'developing new technologies and innovations'
            ],
            point1: [
                'The underlying theory was first proposed in the early 19th century',
                'This principle is fundamental to many engineering disciplines',
                'Modern applications often combine this with computational methods',
                'The mathematical formulation was refined in the 20th century',
                'This concept forms the basis for several patented technologies'
            ],
            point2: [
                'Practical applications often require approximation methods',
                'The ideal case assumes perfect conditions rarely found in nature',
                'This has been experimentally verified to high precision',
                'Several Nobel prizes have been awarded for related work',
                'Recent advances have expanded the range of applications'
            ],
            point3: [
                'Computer simulations have revolutionized how we apply this concept',
                'The limits of this principle define engineering constraints',
                'This is taught in all accredited engineering programs',
                'Professional certification exams often test this knowledge',
                'Ongoing research continues to uncover new implications'
            ],
            consider1: [
                'the historical development of this concept',
                'alternative theoretical frameworks',
                'edge cases where this might not apply',
                'the ethical implications of applications',
                'current research trends in this area'
            ],
            consider2: [
                'how this relates to other concepts in your curriculum',
                'practical examples from industry',
                'common misconceptions about this topic',
                'how this might evolve in the future',
                'career paths that specialize in this area'
            ]
        };
        
        const options = phrases[type] || ['This is an important concept in engineering.'];
        return options[Math.floor(Math.random() * options.length)];
    }
    
    function generateMathStep(equation, stepNum) {
        const steps = [
            `Simplify both sides: ${equation} → ${equation.replace(/\d+/g, m => parseInt(m) + 1)}`,
            `Combine like terms: ${equation} → ${equation.split('').reverse().join('')}`,
            `Apply the distributive property: ${equation} → ${equation} × 1`,
            `Isolate the variable: ${equation} → ${equation} + 0`,
            `Solve for the unknown: ${equation} → ${equation.replace(/[a-z]/gi, 'x')}`
        ];
        return steps[stepNum % steps.length];
    }
    
    function generateMathVerification(equation) {
        const verifications = [
            `Substituting back confirms the solution satisfies the original equation`,
            `Graphical analysis shows the solution at the intersection point`,
            `Dimensional analysis confirms the units are consistent`,
            `The solution checks out when tested with sample values`,
            `This matches known solutions for equations of this form`
        ];
        return verifications[Math.floor(Math.random() * verifications.length)];
    }
    
    function generateMathAnswer(equation) {
        const answers = [
            'x = ' + (Math.random() * 10).toFixed(2),
            'y = ' + (Math.random() * 100).toFixed(1),
            'θ = ' + (Math.random() * 360).toFixed(0) + '°',
            'A = πr² where r = ' + (Math.random() * 5).toFixed(1),
            'v = ' + (Math.random() * 1000).toFixed(0) + ' m/s'
        ];
        return answers[Math.floor(Math.random() * answers.length)];
    }
    
    function generateMathConcept(equation) {
        const concepts = [
            'solving linear equations',
            'quadratic formula applications',
            'systems of equations',
            'trigonometric identities',
            'logarithmic relationships',
            'differential calculus',
            'integral solutions'
        ];
        return concepts[Math.floor(Math.random() * concepts.length)];
    }
    
    function recommendChartType(data) {
        const charts = [
            'line chart showing trends over time',
            'bar chart comparing categories',
            'pie chart showing proportions',
            'scatter plot revealing correlations',
            'histogram displaying distributions',
            'heatmap visualizing density',
            'box plot showing statistical dispersion'
        ];
        return charts[Math.floor(Math.random() * charts.length)];
    }
    
    function explainChartChoice(data) {
        const explanations = [
            'this effectively shows the relationship between key variables',
            'it highlights the most important patterns in the data',
            'this format makes comparisons immediately visible',
            'it properly represents the underlying data structure',
            'this is the industry standard for similar datasets',
            'it works well with the data dimensions and scales'
        ];
        return explanations[Math.floor(Math.random() * explanations.length)];
    }
    
    function generateDataInsight(data, num) {
        const insights = [
            `The data shows a ${['strong', 'weak', 'moderate'][num % 3]} ${['positive', 'negative'][num % 2]} correlation`,
            `${num * 20}% of cases fall within the expected range`,
            `There's a notable ${['increase', 'decrease', 'trend'][num % 3]} around the midpoint`,
            `The distribution is ${['normal', 'skewed', 'bimodal'][num % 3]} with ${['low', 'high', 'moderate'][num % 3]} variance`,
            `Outliers represent about ${num * 5}% of the dataset`
        ];
        return insights[num % insights.length];
    }
    
    function generateExampleVisualizationCode(data) {
        return `import matplotlib.pyplot as plt
import numpy as np

# Sample data
x = np.linspace(0, 10, 100)
y = np.sin(x) + np.random.normal(0, 0.1, 100)

# Create visualization
plt.figure(figsize=(10, 6))
plt.plot(x, y, 'b-', label='Data Trend')
plt.xlabel('X Axis')
plt.ylabel('Y Axis')
plt.title('Sample Data Visualization')
plt.legend()
plt.grid(True)
plt.show()`;
    }
    
    function generateDetailedResponse(input) {
        return `Based on analysis of similar inputs, I've identified several key aspects:
        
1. **Core Concept**: ${generateRandomPhrase('principle')}
2. **Applications**: ${generateRandomPhrase('applications')}
3. **Current Research**: ${generateRandomPhrase('point3')}

This aligns with established engineering principles while offering opportunities for innovation.`;
    }
    
    // Initialize AI Tools when DOM is loaded
    initAITools();
    
    // Close modal when clicking outside
    window.addEventListener('click', function(event) {
        const modal = document.getElementById('aiModal');
        if (event.target === modal) {
            closeAIModal();
        }
    });
});

// Add CSS for AI Tools Modal
const aiToolsCSS = `
/* AI Tools Modal */
.ai-modal {
    display: none;
    position: fixed;
    z-index: 1001;
    left: 0;
    top: 0;
    width: 100%;
    height: 100%;
    background-color: rgba(0, 0, 0, 0.5);
    animation: fadeIn 0.3s ease;
}

.ai-modal-content {
    background-color: var(--card-color);
    margin: 5% auto;
    padding: 20px;
    border-radius: 10px;
    box-shadow: 0 5px 15px rgba(0, 0, 0, 0.3);
    width: 80%;
    max-width: 700px;
    max-height: 80vh;
    display: flex;
    flex-direction: column;
    animation: slideUp 0.3s ease;
}

.ai-modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding-bottom: 15px;
    border-bottom: 1px solid #eee;
    margin-bottom: 15px;
}

.ai-modal-close {
    background: none;
    border: none;
    font-size: 1.5rem;
    cursor: pointer;
    color: var(--text-color);
}

.ai-modal-body {
    flex: 1;
    overflow-y: auto;
}

.ai-tool-input-container {
    margin-bottom: 20px;
}

.ai-tool-input-container textarea {
    width: 100%;
    min-height: 150px;
    padding: 10px;
    border: 1px solid #ddd;
    border-radius: 5px;
    resize: vertical;
    margin-bottom: 10px;
    background-color: var(--bg-color);
    color: var(--text-color);
}

.ai-tool-result {
    border-top: 1px solid #eee;
    padding-top: 20px;
    margin-top: 20px;
}

.loading-spinner {
    display: none;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    padding: 20px;
}

.spinner {
    width: 40px;
    height: 40px;
    border: 4px solid rgba(67, 97, 238, 0.2);
    border-radius: 50%;
    border-top-color: var(--primary-color);
    animation: spin 1s ease-in-out infinite;
    margin-bottom: 10px;
}

@keyframes spin {
    to { transform: rotate(360deg); }
}

.result-content {
    padding: 10px;
}

.ai-section {
    margin-bottom: 20px;
}

.ai-section h4 {
    margin-bottom: 10px;
    color: var(--primary-color);
}

.ai-explanation, .ai-summary, .ai-solution, .ai-recommendation {
    background-color: rgba(67, 97, 238, 0.05);
    padding: 15px;
    border-radius: 5px;
    line-height: 1.6;
}

.ai-suggestions, .ai-key-points, .ai-notes, .ai-additional-info {
    padding-left: 20px;
    margin-top: 10px;
}

.ai-suggestions li, .ai-key-points li, .ai-notes li, .ai-additional-info li {
    margin-bottom: 8px;
}

.ai-copy-btn {
    margin-top: 15px;
    width: 100%;
}

.ai-error {
    color: #f94144;
    display: flex;
    align-items: center;
    gap: 10px;
}

/* Responsive adjustments */
@media (max-width: 768px) {
    .ai-modal-content {
        width: 90%;
        margin: 10% auto;
    }
}

@media (max-width: 480px) {
    .ai-modal-content {
        width: 95%;
        margin: 5% auto;
    }
}
`;

// Add the CSS to the head
document.head.insertAdjacentHTML('beforeend', `<style>${aiToolsCSS}</style>`);
    </script>
</body>
</html>